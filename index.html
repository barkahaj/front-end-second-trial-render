<!-- frontend/index.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Simple Blog</title>
</head>
<body>
  <h1>My Blog</h1>
  <div id="posts"></div>
  <form id="postForm">
    <input type="text" name="title" placeholder="Title" required />
    <textarea name="content" placeholder="Content" required></textarea>
    <button type="submit">Post</button>
  </form>
  <script>
    const backendURL = 'https://backend-trial-render.onrender.com';

    async function loadPosts() {
      const res = await fetch(`${backendURL}/posts`);
      const posts = await res.json();
      const container = document.getElementById('posts');
      container.innerHTML = posts.map(post => `<h3>${post.title}</h3><p>${post.content}</p>`).join('');
    }

    document.getElementById('postForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const title = form.title.value;
      const content = form.content.value;
      await fetch(`${backendURL}/posts`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, content })
      });
      form.reset();
      loadPosts();
    });

    loadPosts();
  </script>
</body>
</html>
